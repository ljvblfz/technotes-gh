\section{Ubuntu软件安装与管理}

查看已经安装了哪些包：
\begin{verbatim}
dpkg -l
\end{verbatim}

查看软件包版本和其他信息
\begin{verbatim}
 apt-cache showpkg mendeleydesktop
\end{verbatim}

查找官方源软件包：
\begin{verbatim}
apt-cache search 正则表达式
aptitude search 软件包
\end{verbatim}

如果官方源中没有相关的包，可以查看PPA仓库:

\url{https://launchpad.net/ubuntu/+ppas}

安装ppa软件的一般方法有两种:
\begin{verbatim}
sudo add-apt-repository source_line
sudo add-apt-repository ppa:<user>/<ppa-name>
\end{verbatim}

查询软件xxx依赖哪些包：
\begin{verbatim}
apt-cache depends xxx
\end{verbatim}

查询软件xxx被哪些包依赖：
\begin{verbatim}
apt-cache rdepends xxx
\end{verbatim}

查找文件属于哪个包
\begin{verbatim}
apt-file search filename
\end{verbatim}

编译时缺少h文件的自动处理
\begin{verbatim}
sudo auto-apt run ./configure
\end{verbatim}

查看安装软件时下载包的临时存放目录
\begin{verbatim}
ls /var/cache/apt/archives
\end{verbatim}

备份当前系统安装的所有包的列表
\begin{verbatim}
dpkg --get-selections | grep -v deinstall > ~/somefile
\end{verbatim}

从上面备份的安装包的列表文件恢复所有包
\begin{verbatim}
dpkg --set-selections < ~/somefile
sudo dselect
\end{verbatim}

清理旧版本的软件缓存
\begin{verbatim}
sudo apt-get autoclean
\end{verbatim}

清理所有软件缓存
\begin{verbatim}
sudo apt-get clean
\end{verbatim}

删除系统不再使用的孤立软件
\begin{verbatim}
sudo apt-get autoremove
\end{verbatim}

查看包在服务器上面的地址
\begin{verbatim}
apt-get -qq --print-uris install ssh | cut -d\' -f2
\end{verbatim}

除所有已删除包的残馀配置文件
\begin{verbatim}
dpkg -l |grep ^rc|awk '{print $2}' |sudo xargs dpkg -P 
\end{verbatim}
如果你的系统中没有残留配置文件了，会报错。

